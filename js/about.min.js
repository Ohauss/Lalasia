import"./app.min.js";import"./unimodal.min.js";const l=document.querySelector(".video-block");if(l){const o=l.querySelector("video"),t=l.querySelector(".video-block__play"),e=l.querySelector(".video-block__muted");o&&t&&(t.addEventListener("click",()=>{l.classList.add("video-block--played"),o.play().then(()=>{o.controls=!0,t.classList.add("video-block__play--played")}).catch(n=>{console.error("\u041F\u043E\u043C\u0438\u043B\u043A\u0430 \u0432\u0456\u0434\u0442\u0432\u043E\u0440\u0435\u043D\u043D\u044F \u0432\u0456\u0434\u0435\u043E:",n)})}),o.addEventListener("pause",()=>{l.classList.remove("video-block--played"),o.controls=!1,t.classList.remove("video-block__play--played")}),o.addEventListener("ended",()=>{l.classList.remove("video-block--played"),o.controls=!1,t.classList.remove("video-block__play--played")}),e&&(o.muted=!1,e.addEventListener("click",()=>{o.muted=!o.muted,o.muted?e.classList.add("video-block__muted--active"):e.classList.remove("video-block__muted--active")})))}const p={threshold:.1,rootMargin:"0px 0px -50px 0px"},g=new IntersectionObserver(o=>{o.forEach(t=>{t.isIntersecting&&(t.target.style.animationPlayState="running")})},p);document.querySelectorAll(".team__member").forEach(o=>{g.observe(o)}),document.querySelectorAll(".team__member").forEach(o=>{o.addEventListener("mousemove",t=>{const e=o.getBoundingClientRect(),n=t.clientX-e.left,s=t.clientY-e.top,i=e.width/2,r=e.height/2,a=(s-r)/15,c=(i-n)/15,d=o.querySelector(".member-photo");d.style.transform=`perspective(1000px) rotateX(${a}deg) rotateY(${c}deg) translateY(-5px)`}),o.addEventListener("mouseleave",()=>{const t=o.querySelector(".member-photo");t.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg) translateY(0px)"}),o.addEventListener("touchmove",t=>{t.preventDefault();const e=t.touches[0];handleMouseMove({clientX:e.clientX,clientY:e.clientY})})}),window.addEventListener("load",()=>{const o=document.querySelector(".section-title");o&&(o.style.animationDelay="0.2s")});class u{constructor(t,e,n=2e3){this.element=t,this.targetValue=this.parseTargetValue(e),this.duration=n,this.hasAnimated=!1}parseTargetValue(t){const e=t.toString().replace("+","");return parseInt(e,10)}animate(){if(this.hasAnimated)return;this.hasAnimated=!0;const t=performance.now(),e=0,s=this.element.textContent.includes("+");this.element.classList.add("counting");const i=r=>{const a=r-t,c=Math.min(a/this.duration,1),d=1-Math.pow(1-c,3),m=Math.floor(e+(this.targetValue-e)*d);this.element.textContent=s?`${m}+`:m,c<1?requestAnimationFrame(i):this.element.classList.remove("counting")};requestAnimationFrame(i)}}function h(){const o=document.querySelectorAll(".fade-in, .slide-left, .slide-right"),t=new IntersectionObserver(e=>{e.forEach((n,s)=>{n.isIntersecting&&setTimeout(()=>{n.target.classList.add("visible")},s*150)})},{threshold:.2,rootMargin:"0px 0px -50px 0px"});o.forEach(e=>{t.observe(e)})}function v(){const o=document.querySelectorAll(".facts__item-value"),t=[];o.forEach((i,r)=>{const a=i.textContent,c=2500+r*300;t.push(new u(i,a,c))});const e={root:null,rootMargin:"0px 0px -100px 0px",threshold:.3},n=new IntersectionObserver(i=>{i.forEach(r=>{r.isIntersecting&&(t.forEach((a,c)=>{setTimeout(()=>{a.animate()},c*200)}),r.target.classList.add("animate-counters"),n.unobserve(r.target))})},e),s=document.querySelector(".mission");s&&n.observe(s)}function f(){const o=document.querySelectorAll(".facts__item"),t=document.querySelectorAll(".mission__item-right");o.forEach(e=>{e.addEventListener("mouseenter",function(){this.classList.add("hovered")}),e.addEventListener("mouseleave",function(){this.classList.remove("hovered")})}),t.forEach(e=>{e.addEventListener("mouseenter",function(){this.classList.add("hovered")}),e.addEventListener("mouseleave",function(){this.classList.remove("hovered")})})}function y(){document.querySelectorAll("a[href]").forEach(t=>{const e=t.getAttribute("href");e&&e.startsWith("#")&&e.length>1&&t.addEventListener("click",function(n){n.preventDefault();try{const s=document.querySelector(e);s&&s.scrollIntoView({behavior:"smooth",block:"start"})}catch(s){console.warn(`Cannot scroll to: ${e}`,s)}})})}function b(){document.querySelectorAll(".facts__item-value").forEach((t,e)=>{const n=t.getAttribute("data-target")||t.textContent,s=new u(t,n,2e3);s.hasAnimated=!1,setTimeout(()=>{s.animate()},e*200)})}function L(){"IntersectionObserver"in window||window.addEventListener("scroll",function(){document.querySelectorAll(".fade-in:not(.visible)").forEach(t=>{t.getBoundingClientRect().top<window.innerHeight-150&&t.classList.add("visible")})})}document.addEventListener("DOMContentLoaded",function(){h(),v(),f(),y(),L(),setTimeout(()=>{document.body.classList.add("mission-loaded")},100)}),window.MissionAnimation={Counter:u,initMissionCounters:v,restartMissionCounters:b,initScrollAnimation:h,initMissionHoverEffects:f};
