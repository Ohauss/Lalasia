document.addEventListener("DOMContentLoaded",function(){const l=document.getElementById("modalOverlay");l&&(l.classList.remove("active"),document.body.style.overflow="");function m(t){const e=t.toLowerCase();return e.includes("newsletter")||e.includes("subscribe")?"newsletter":e.includes("discount")||e.includes("special")?"discount":e.includes("work")||e.includes("collaborate")||e.includes("project")?"work":"general"}const g={newsletter:{title:"Subscribe to Newsletter",subtitle:"Get the latest news and updates",submitText:"Subscribe",messagePlaceholder:"What topics interest you most?"},discount:{title:"Special Discount",subtitle:"Learn about our exclusive offers",submitText:"Get Discount",messagePlaceholder:"Tell us about your needs and interests..."},work:{title:"Work with Us",subtitle:"Let's discuss your project",submitText:"Send Request",messagePlaceholder:"Describe your project and how we can help..."},general:{title:"Get in Touch",subtitle:"We'd love to hear from you",submitText:"Send Message",messagePlaceholder:"Tell us how we can help you..."}};function d(t){t.preventDefault(),t.stopPropagation(),console.log("Opening modal...");let e="general";if(t.target.textContent.toLowerCase().includes("discount"))e="discount";else{let n="";const u=document.querySelector(".join__title h2");if(u)n=u.textContent;else{const r=document.querySelector(".product__title");r&&(n=r.textContent)}n&&(e=m(n))}const i=g[e];document.getElementById("modalTitle").textContent=i.title,document.getElementById("modalSubtitle").textContent=i.subtitle,document.getElementById("submitBtn").textContent=i.submitText,document.getElementById("message").placeholder=i.messagePlaceholder,l.classList.add("active"),document.body.style.overflow="hidden",console.log("Modal opened, active class added"),setTimeout(()=>{const n=document.getElementById("name");n&&n.focus()},300)}function c(t){t&&t.target!==t.currentTarget||(console.log("Closing modal..."),l.classList.remove("active"),document.body.style.overflow="",setTimeout(()=>{const e=document.getElementById("contactForm");e&&e.reset()},300))}function f(){document.querySelectorAll('[onclick*="openModal"], .discount-btn, .modal-trigger, [data-modal-trigger]').forEach(o=>{o.removeAttribute("onclick"),o.addEventListener("click",d),console.log("Modal trigger initialized:",o)}),document.querySelectorAll('button, .btn, a[href="#"]').forEach(o=>{const s=o.textContent.toLowerCase();(s.includes("discount")||s.includes("contact")||s.includes("get"))&&(o.removeAttribute("onclick"),o.addEventListener("click",d),console.log("Auto-detected modal trigger:",o))})}function b(){l&&l.addEventListener("click",c);const t=document.querySelector(".modal__close, .close-modal, [data-modal-close]");t&&t.addEventListener("click",function(e){e.preventDefault(),c()})}window.openModal=d,window.closeModal=c,f(),b();const a=document.getElementById("contactForm");a&&a.addEventListener("submit",function(t){t.preventDefault();const e=new FormData(this);Object.fromEntries(e);const o=document.getElementById("submitBtn"),s=o.textContent;o.textContent="Sending...",o.disabled=!0,setTimeout(()=>{alert("Thank you! Your message has been sent. We'll get back to you soon."),c(),o.textContent=s,o.disabled=!1},1500)}),document.addEventListener("keydown",function(t){t.key==="Escape"&&c()})});
